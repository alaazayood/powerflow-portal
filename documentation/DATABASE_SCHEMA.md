# ูุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช (Database Schema)

ูุณุชุฎุฏู ุงููุธุงู ูุงุนุฏุฉ ุจูุงูุงุช **MySQL**. ูุชู ุฅุฏุงุฑุฉ ุงููุฎุทุท (Schema) ุจุงุณุชุฎุฏุงู **Prisma**.

## ๐ ุงูุฌุฏุงูู (Tables)

### 1. `users`
ุฌุฏูู ุงููุณุชุฎุฏููู ุงูุฃุณุงุณู. ูุญุชูู ุนูู ุจูุงูุงุช ุงูุฏุฎูู ูุญุงูุฉ ุงูุญุณุงุจ.

| Column | Type | Description |
| :--- | :--- | :--- |
| `user_id` | INT (PK) | ุงููุนุฑู ุงููุฑูุฏ ูููุณุชุฎุฏู |
| `customer_id` | INT (FK) | ูุนุฑู ุงูุนููู (ุงูุดุฑูุฉ/ุงููุฑุฏ) ุงูุชุงุจุน ูู |
| `email` | VARCHAR | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (Unique) |
| `password_hash` | VARCHAR | ูููุฉ ุงููุฑูุฑ ุงููุดูุฑุฉ (Hashed) |
| `first_name` | VARCHAR | ุงูุงุณู ุงูุฃูู |
| `last_name` | VARCHAR | ุงุณู ุงูุนุงุฆูุฉ |
| `role` | ENUM | ุงูุตูุงุญูุฉ (`USER`, `ADMIN`, `OWNER`) |
| `is_verified` | BOOLEAN | ูู ุชู ุงูุชุญูู ูู ุงูุจุฑูุฏุ |
| `verification_code`| VARCHAR | ููุฏ ุงูุชุญูู ุงูุญุงูู |
| `verification_code_expires`| DATETIME | ููุช ุงูุชูุงุก ุตูุงุญูุฉ ุงูููุฏ |
| `verification_attempts`| INT | ุนุฏุฏ ูุญุงููุงุช ุงูุชุญูู ุงููุงุดูุฉ |
| `last_verification_sent`| DATETIME | ููุช ุขุฎุฑ ุฅุฑุณุงู ููููุฏ |
| `is_active` | BOOLEAN | ุญุงูุฉ ุงูุญุณุงุจ (ูุดุท/ูุนุทู) |

### 2. `customers`
ุฌุฏูู ุชูุงุตูู ุงูุนููุงุก (ุงูุดุฑูุงุช ุฃู ุงูุฃูุฑุงุฏ).

| Column | Type | Description |
| :--- | :--- | :--- |
| `customer_id` | INT (PK) | ุงููุนุฑู ุงููุฑูุฏ |
| `email` | VARCHAR | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููุชูุงุตู |
| `first_name` | VARCHAR | ุงูุงุณู ุงูุฃูู ูููุณุคูู |
| `last_name` | VARCHAR | ุงุณู ุงูุนุงุฆูุฉ ูููุณุคูู |
| `phone` | VARCHAR | ุฑูู ุงููุงุชู |
| `customer_type` | ENUM | ููุน ุงูุนููู (`INDIVIDUAL`, `COMPANY`) |
| `company_name` | VARCHAR | ุงุณู ุงูุดุฑูุฉ (ููุดุฑูุงุช ููุท) |
| `registration_date` | DATETIME | ุชุงุฑูุฎ ุงูุชุณุฌูู |

### 3. `licenses`
ุฌุฏูู ุงูุชุฑุงุฎูุต ุงูููููุญุฉ ููุนููุงุก.

| Column | Type | Description |
| :--- | :--- | :--- |
| `license_id` | INT (PK) | ุงููุนุฑู ุงููุฑูุฏ ููุชุฑุฎูุต |
| `customer_id` | INT (FK) | ูุนุฑู ุงูุนููู ุตุงุญุจ ุงูุชุฑุฎูุต |
| `license_hash` | VARCHAR | ููุชุงุญ ุงูุชุฑุฎูุต (License Key) |
| `license_type` | VARCHAR | ููุน ุงูุงุดุชุฑุงู (`yearly`, `3years`, `floating`) |
| `seat_number` | INT | ุฑูู ุงูููุนุฏ (ููุชุฑุงุฎูุต ูุชุนุฏุฏุฉ ุงูููุงุนุฏ) |
| `issue_date` | DATETIME | ุชุงุฑูุฎ ุงูุฅุตุฏุงุฑ |
| `expiration_date` | DATETIME | ุชุงุฑูุฎ ุงูุงูุชูุงุก |
| `is_active` | BOOLEAN | ุญุงูุฉ ุงูุชุฑุฎูุต |
| `username` | VARCHAR | ุงุณู ูุณุชุฎุฏู ุงูุฌูุงุฒ (ุนูุฏ ุงูุชูุนูู) |
| `pc_uuid` | VARCHAR | ูุนุฑู ุงูุฌูุงุฒ ุงููุฑูุฏ (Hardware ID) |
| `last_activity` | DATETIME | ุขุฎุฑ ุงุชุตุงู ุจุงูุณูุฑูุฑ |

### 4. `invitations`
ุฌุฏูู ุงูุฏุนูุงุช ุงููุฑุณูุฉ ูููุณุชุฎุฏููู ุงูุฌุฏุฏ ููุงูุถูุงู ูููุฑูู.

| Column | Type | Description |
| :--- | :--- | :--- |
| `id` | INT (PK) | ุงููุนุฑู ุงููุฑูุฏ |
| `email` | VARCHAR | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุงููุฏุนู |
| `token` | VARCHAR | ุชููู ุงูุฏุนูุฉ ุงููุฑูุฏ |
| `inviter_id` | INT (FK) | ูุนุฑู ุงููุณุชุฎุฏู ุงูุฐู ุฃุฑุณู ุงูุฏุนูุฉ |
| `customer_id` | INT (FK) | ูุนุฑู ุงูุนููู (ุงููุฑูู) |
| `status` | VARCHAR | ุญุงูุฉ ุงูุฏุนูุฉ (`PENDING`, `ACCEPTED`, `EXPIRED`) |
| `expires_at` | DATETIME | ุชุงุฑูุฎ ุงูุชูุงุก ุตูุงุญูุฉ ุงูุฏุนูุฉ |
| `created_at` | DATETIME | ุชุงุฑูุฎ ุงูุฅุฑุณุงู |

---

## ๐ ุงูุนูุงูุงุช (Relationships)

- **Customers โ Users:** ุนูุงูุฉ (1:N). ุงูุนููู (ุงูุดุฑูุฉ) ูููู ุนุฏุฉ ูุณุชุฎุฏููู.
- **Customers โ Licenses:** ุนูุงูุฉ (1:N). ุงูุนููู ูููู ุนุฏุฉ ุชุฑุงุฎูุต.
- **Users โ Invitations:** ุนูุงูุฉ (1:N). ุงููุณุชุฎุฏู ููููู ุฅุฑุณุงู ุนุฏุฉ ุฏุนูุงุช.